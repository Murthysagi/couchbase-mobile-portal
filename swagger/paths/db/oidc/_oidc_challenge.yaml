parameters:
  - $ref: '#/parameters/db'
get:
  tags:
    - auth
  summary: OpenID Connect Authentication.
  description: |
    Called by clients to initiate the OIDC Authorization Code flow. 
  parameters:
    - in: query
      name: offline
      description: When true, requests a refresh token from the OP. Sets access_type=offline and prompt=consent on the redirect to the OP. Secure clients should set offline=true and persist the returned refresh token to secure storage.
      type: boolean
      required: false
    - in: query
      name: provider
      description: OpenId Connect provider to be used for authentication, from the list of providers defined in the Sync Gateway Config. If not specified, will attempt to authenticate using the default provider.
      type: string
      required: false
  responses:
    302:
      description: Redirect to the requested OpenID Connect provider for authentication. Redirect link is returned in the Location header.
    400:
      description: Bad request.  Reason is returned as "OpenID Connect not configured for database default".  If a provider was specified in the request, that provider was not defined in the Sync Gateway config.  If no provider was specified, OpenID Connect is not configured in the Sync Gateway config.
    500:
      description: Server Error.  Sync Gateway is unable to connect and validate the OpenID Connect provider requested.  